# การทดลองที่ 4 การเขียนโปรแกรมอินพุทสัญญาณดิจิทัล
## วัตถุประสงค์
1.เพื่อทราบถึงการเขียนโปรแกรมอินพุทสัญญาณดิจิทัล <br>
2.เพื่อนำ microcontroller ที่ลงโปรแกรมนำไปใช้ได้ 
## อุปกรณ์ที่ใช้
1.ไมโครคอนโทรเลอร์ (ESP-01) <br>
2.อแดปเตอร์ที่ต่อสายพอร์ท 0 (สีขาว) กับ พอร์ท 2 (สีเหลือง) <br>
3.อุปกรณ์ต่อ USB <br>
4.หลอดไฟ LED <br> 
5.computer <br> 
6.ตัวโปรแกรม Input สัญญาณ <br>
7.ตัวเซนเซอร์แสง
### ศึกษาข้อมูลเบื้องต้น
04 run example 4 https://youtu.be/nFqoZT26U5k <br> 
code ของโปรแกรม 04_Input-Port : https://github.com/choompol-boonmee/lab63b/blob/master/examples/04_Input-Port/src/main.cpp
## วิธีทำ
1.เอาอแดปเตอร์ต่อกับตัว USB to seria (ตัวอแดปเตอร์ที่ใช้ในการทดลองนี้มีการต่อกับ LED) <br>
2.นำตัวmicrocontrollerต่อกับพอร์ท <br>
3.เข้าcommand prompt <br>
4.เข้าตัวอย่างโปรแกรมจากโดยใช้พิมพ์คำสั่ง cd pattani ในหน้า command prompt <br>
5.เลือกตัวอย่างโปรแกรมคำสั่ง cd 04_Input-Port ตามด้วยคำสั่ง 1s และ pwd <br>
6.พิมพ์คำสั่ง vi src/main.cpp เมื่อกด Enter จะขึ้นโค้ดดังนี้ <br>
![image](https://user-images.githubusercontent.com/80882373/112309942-9378f580-8cd6-11eb-8c6a-6a6162d10406.png) <br>
โดยโค้ดของโปรแกรมนี้ได้เซตที่พอร์ท 0 คือ input พอร์ท 2 คือ output และ อ่านจะอ่านข้อมูลจากพอร์ท 0 โดยให้เป็นข้อมูลดิจิทัล(มีค่า 0 1) และแสดงผลว่าอ่านได้เท่าไหร่โดยถ้าเป็น 1 จะเป็นค่า low ที่พอร์ท 2 และถ้าเป็น 0 จะเป็นค่า high ที่พอร์ท 2 <br>
7.กดปุ่มอัพโหลดและกดปุ่มรีเซตที่ตัวไมโครคอนโทรลเลอร์เพื่อให้ตัวโปรแกรมอัพโหลดเข้าไปในตัวไมโครคอนโทรลเลอร์ <br>
8.pio device monitor เพื่อดูผลลัพธ์ <br>
9.ดูที่สายไฟเส้นที่ขาว (พอร์ท 0) โดยจิ้มที่เส้นสีดำ (0V) <br>
![image](https://media.discordapp.net/attachments/663373978848591875/824257923877699584/112266894-3f0a5180-8ca7-11eb-8f0c-86a9c796d6cc.png?width=941&height=409) <br>
-นำสายไฟสีขาว(port 0)ไปจิ้มที่เส้นสีแดงจะให้สัญญาณ input เป็น 1 ไฟดับ <br>
![image](https://media.discordapp.net/attachments/663373978848591875/824258241441562634/112266991-5cd7b680-8ca7-11eb-92e8-f5f005a01b3a.png?width=941&height=408) <br>
-กดปุ่มสีดำ(port 0 = 0) input เป็น 0 ไฟติด <br>
![image](https://media.discordapp.net/attachments/663373978848591875/824258464510902362/112267129-94def980-8ca7-11eb-9284-08c07ecefef6.png?width=941&height=409) <br>
-ปล่อยปุ่มสีดำ input เป็น 1 ไฟดับ <br>
![image](https://media.discordapp.net/attachments/663373978848591875/824259044289150996/112267206-afb16e00-8ca7-11eb-9507-1df3d6544766.png?width=941&height=411) <br>
10.นำตัวไมโครคอนโทรลเลอร์ที่เขียนโปรแกรมไว้แล้วมาต่อกับตัวรีเลย์ <br>
11.กดปุ่มสีดำ (เป็น0 ไฟติด) และปล่อยปุ่มสีดำ <br>
12.ต่อตัวเซนเซอร์กับคอมพิวเตอร์ <br>
13.นำinput(เส้นสีขาว)ต่อกับสัญญาณจากcensor <br>
14.ลองเอานิ้วไปเปิดหน้าcensor กับไม่เอานิ้วปิดcensor และสังเกตหลอด LED <br>
![image](https://media.discordapp.net/attachments/663373978848591875/824259423995166750/112266374-71677f00-8ca6-11eb-8ca7-7e3e36b1f1f6.png?width=765&height=430) <br>
ถ้าเปิดซนเซอร์มีแสงสว่าง input เป็น 0 ไฟติด <br>
ถ้าเปิดเซนเซอร์ไม่มีแสงสว่าง input เป็น 1 ไฟดับ <br>
## การบันทึกผลการทดลอง
1.เขียนโปรแกรมไมโครคอนโทรลเลอร์ด้วยโปรแกรม 04_Input-Port <br>
จะเห็นว่าจากคำสั่ง pio device monitor ได้ขึ้นชื่อว่า read 1 ซึ่งหมายความว่า input คือ 1 ทำให้เป็น low ที่พอร์ท 2 จะทำให้ไฟดับนั่นเอง <br>
เมื่อจิ้มเส้นอินพุทไปที่สีดำซึ่งจะได้ค่า input คือ 0 ทำให้เป็น high ไฟติด <br>
เมื่อจิ้มเส้นอินพุทไปที่สีแดงซึ่งจะได้ค่า input คือ 1 ทำให้เป็น low ไฟดับ <br>
กดปุ่มสีดำ input คือ 0 ทำให้เป็น high (ไฟติด) <br>
ปล่อยปุ่ม input คือ 1 ทำให้เป็น low (ไฟดับ) <br>
2.การนำตัวไมโครคอนโทรลเลอร์ที่ได้ลงโปรแกรมแล้วมาประยุกต์ใช้ต่อกับตัวเซนเซอร์แสง จะเห็นว่าเมื่อเอานิ้วบัง ไฟดับ และไม่เอานิ้วบังแสง ไฟติด
## อภิปรายผลการทดลอง
จากการทดลองเขียนโปรแกรมสามารถสรุปจากการโค้ดที่เขียนโปรแกรมได้ว่า สัญญาณอินพุทจากพอร์ท 0 คือตัวควบคุมให้ไฟถ้าเป็นเลข 1 คือไฟดับเลข 0 คือไฟติดโดยดูไฟที่พอร์ท 2 <br>
และในส่วนของการมาประยุกต์ใช้ต่อกับตัวเซนเซอร์แสง โดยเมื่อบังแสง ทำให้แรงต้านสูงทำให้ค่าinputเป็นเลข 1 ไฟดับ และเมื่อสว่างทำให้แรงต้านทานน้อยinput เป็นเลข 0 ไฟติด <br>
## คำถามหลังการทดลอง
? ไฟติด-ไฟดิบ input คือเลขอะไร <br>
Ans : ไฟติด = 0, ไฟดับ = 1
